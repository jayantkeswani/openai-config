{
  "type": "detail",
  "extract": {
    "name": [
      {
        "select": {
          "query": ".fed-pdp-product-details-title h1",
          "mode": "FIRST"
        },
        "method": {
          "text": {}
        }
      }
    ],
    "price": [
      {
        "select": {
          "query": ".normalPrice",
          "mode": "FIRST"
        },
        "method": {
          "text": {}
        },
        "parsers": [
          {
            "spel": {
              "expr": "#root.replace(',' , '')"
            }
          }
        ]
      }
    ],
    "netQuantity": [
      {
        "select": {
          "query": ".fed-pdp-product-details-title h1",
          "mode": "FIRST"
        },
        "method": {
          "text": {}
        },
        "parsers": [
          {
            "patternSpel": {
              "regex": "(?i)((?<net>\\d+([,.]\\d+)?) ?(?<unit>(kg|gm|g|cl|ml|ltr|litre|L|l|uds|Pack|pcs|Pieces|oz|Sachets|s|Capsules|ea)) ?x? ?(?<quantity>\\d*) ?(\\+ (?<free>\\d+) Free)?|((?<quantity1>\\d*) ?x ?(?<net1>\\d+([,.]\\d+)?) ?(?<unit1>(kg|gm|g|cl|ml|ltr|litre|L|l|uds|Pack|pcs|Pieces|oz|Sachets|s|Capsules|ea))))",
              "expr": "(#net1 != null && #net1 != '') ? #net1+ #unit1+ ' x ' + #quantity1 : (#quantity != null && #quantity !='') ? ((#free != null && #free != '') ? #net+ #unit+ ' x ' + (T(java.lang.Integer).parseInt(#quantity) + T(java.lang.Integer).parseInt(#free)) : #net+ #unit+ ' x ' + #quantity) : (#net != null && #net != '' && #unit!= null && #unit!='') ? #net + ' ' + #unit: ''"
            }
          }
        ]
      }
    ],
    "productNo": [
      {
        "select": {
          "query": "div[data-productid]",
          "mode": "FIRST"
        },
        "method": {
          "attr": {
            "key": "data-productid"
          }
        }
      }
    ],
    "gtin": [
      {
        "select": {
          "query": ".product-classifications .row:has(div:containsOwn(Barcode))",
          "mode": "FIRST"
        },
        "method": {
          "text": {
            "own": true
          }
        },
        "parsers": [
          {
            "pattern": {
              "regex": "\\d{13}"
            }
          }
        ]
      }
    ],
    "promotionText": [
      {
        "select": {
          "query": ".fed-pdp-product-details-price-promo .promotion",
          "mode": "SPLIT"
        },
        "method": {
          "text": {}
        }
      },
      {
        "select": {
          "query": ".oldPrice",
          "mode": "SPLIT"
        },
        "method": {
          "text": {}
        },
        "parsers": [
          {
            "spel": {
              "expr": "'Was ' + #root.replace(',', '')"
            }
          }
        ]
      }
    ],
    "description": [
      {
        "select": {
          "query": ".product-classifications .row:has(div:containsOwn(Description))",
          "mode": "FIRST"
        },
        "method": {
          "text": {
            "own": true
          }
        }
      }
    ],
    "ingredients": [
      {
        "select": {
          "query": ".product-classifications .row:has(div:containsOwn(Ingredients))",
          "mode": "FIRST"
        },
        "method": {
          "text": {
            "own": true
          }
        }
      }
    ],
    "ingredientsHtml": [
      {
        "select": {
          "query": ".product-classifications .row:has(div:containsOwn(Ingredients))",
          "mode": "FIRST"
        },
        "method": {
          "html": {}
        }
      }
    ],
    "nutrition": [
      {
        "select": {
          "query": ".nutritional-info",
          "mode": "FIRST"
        },
        "method": {
          "text": {}
        }
      }
    ],
    "allergens": [
      {
        "select": {
          "query": ".product-classifications .row:has(div:containsOwn(Allergen Warnings))",
          "mode": "FIRST"
        },
        "method": {
          "text": {
            "own": true
          }
        }
      }
    ],
    "storage": [
      {
        "select": {
          "query": ".product-classifications .row:has(div:containsOwn(Storage))",
          "mode": "FIRST"
        },
        "method": {
          "text": {
            "own": true
          }
        }
      }
    ],
    "features": [
      {
        "select": {
          "query": "div.product-classifications div.row:contains(Features) li",
          "mode": "SPLIT"
        },
        "method": {
          "text": {}
        }
      }
    ],
    "imageURL": [
      {
        "select": {
          "query": ".gallery-image img",
          "mode": "SPLIT"
        },
        "method": {
          "attr": {
            "key": "abs:data-src"
          }
        }
      }
    ],
    "instructions": [
      {
        "select": {
          "query": ".product-classifications .row:has(div:containsOwn(Usage)), .product-classifications .row:has(div:containsOwn(Serving Suggestions))",
          "mode": "SPLIT"
        },
        "method": {
          "text": {
            "own": true
          }
        },
        "join": {
          "separator": " "
        }
      }
    ],
    "outOfStock": [
      {
        "select": {
          "query": ".upfrontOutOfStockMsg",
          "mode": "FIRST"
        },
        "method": {
          "text": {}
        }
      }
    ],
    "badge": [
      {
        "select": {
          "query": ".maximumQtyDisplayMsgContainer b",
          "mode": "FIRST"
        },
        "method": {
          "text": {
            "own": true
          }
        }
      }
    ],
    "brand": [
      {
        "select": {
          "query": ".ef-custom-brand",
          "mode": "FIRST"
        },
        "method": {
          "text": {}
        }
      }
    ],
    "bulletPoints": [
      {
        "select": {
          "query": "div.product-classifications div.row:contains(Features) li, div.product-classifications div.row:contains(Lifestyle) li",
          "mode": "SPLIT"
        },
        "method": {
          "text": {}
        }
      }
    ]
  },
  "feedback": {
    "avgRating": [
      {
        "select": {
          "query": ".fed-pdp-product-details .rating[data-rating]",
          "mode": "FIRST"
        },
        "method": {
          "attr": {
            "key": "data-rating"
          }
        },
        "parsers": [
          {
            "pattern": {
              "regex": "\"rating\":\"(?<rating>(\\d+[.]\\d{1,2})|())",
              "group": "rating"
            }
          }
        ]
      }
    ],
    "commentCount": [
      {
        "select": {
          "query": "div.rating .js-openTab",
          "mode": "FIRST"
        },
        "method": {
          "text": {}
        },
        "parsers": [
          {
            "pattern": {
              "regex": "\\d+"
            }
          }
        ]
      }
    ],
    "comments": {
      "split": ".review-list .review-entry",
      "dateLabel": [
        {
          "select": {
            "query": ".autor .date",
            "mode": "FIRST"
          },
          "method": {
            "text": {
              "own": true
            }
          },
          "parsers": [
            {
              "pattern": {
                "regex": "\\((?<dateLabel>\\d{1,2}\/\\d{1,2}\/\\d{4})\\)",
                "group": "dateLabel"
              }
            }
          ]
        }
      ],
      "dateParser": {
        "formatted": {
          "format": "dd/MM/yyyy"
        }
      },
      "rating": [
        {
          "select": {
            "query": ".rating-stars .glyphicon-star",
            "mode": "SPLIT"
          },
          "method": {
            "attr": {
              "key": "class"
            }
          },
          "join": {
            "separator": " "
          },
          "parsers": [
            {
              "spel": {
                "expr": "T(org.apache.commons.lang3.StringUtils).countMatches(#root, 'active')"
              }
            }
          ]
        }
      ],
      "username": [
        {
          "select": {
            "query": ".autor",
            "mode": "FIRST"
          },
          "method": {
            "text": {
              "own": true
            }
          }
        }
      ],
      "content": [
        {
          "select": {
            "query": "div.content",
            "mode": "SPLIT"
          },
          "method": {
            "text": {}
          }
        }
      ],
      "subject":[
        {
          "select": {
            "query": "div.title",
            "mode": "FIRST"
          },
          "method": {
            "text": {}
          }
        }
      ]
    }
  },
  "extractor": {
    "direct": {}
  }
}